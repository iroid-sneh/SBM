<html>
    <head>
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://unpkg.com/flowbite@1.6.5/dist/flowbite.min.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    </head>
    <body
        class="bg-cover bg-no-repeat min-h-screen relative overflow-hidden bg-gradient-to-t from-[#163F75]/50 to-[#54B7C5]/50"
    >
        <% if (messages.success && messages.success.length > 0) { %>
        <script>
            const SBM_PRIMARY = "#54B7C5";
            Swal.fire({
                icon: "success",
                title: "Success",
                text: `<%= messages.success[0]?.replace(/"/g, '') %>`,
                toast: true,
                position: "top-end",
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true,
                background: "#ffffff",
                color: "#222",
                iconColor: SBM_PRIMARY,
                customClass: {
                    popup: "shadow-lg rounded-xl border border-gray-200",
                    title: "text-[#222] font-medium",
                    timerProgressBar: "bg-[#54B7C5]",
                },
            });
        </script>
        <% } %> <% if (messages.error && messages.error.length > 0) { %>
        <script>
            Swal.fire({
                icon: "error",
                title: "Error",
                text: `<%= messages.error[0]?.replace(/"/g, '') %>`,
                toast: true,
                position: "top-end",
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true,
                background: "#ffffff",
                color: "#222",
                iconColor: "#e74c3c",
                customClass: {
                    popup: "shadow-lg rounded-xl border border-gray-200",
                    title: "text-[#222] font-medium",
                    timerProgressBar: "bg-red-400",
                },
            });
        </script>
        <% } %>
        <div
            class="absolute inset-0 bg-cover bg-no-repeat opacity-20 z-0"
            style="
                background-image: url('<%= process.env.APP_URL_ADMIN %>/Icons/images/BMAuthBg.png');
            "
        ></div>
        <div class="relative w-full">
            <img
                src="<%= process.env.APP_URL_ADMIN %>/Icons/images/BMAuthTop.svg"
                alt="Top Right Decoration"
                class="absolute top-0 right-0 w-[834px] pointer-events-none z-10"
            />
            <img
                src="<%= process.env.APP_URL_ADMIN %>/Icons/images/BMLogo.png"
                alt="BM Logo"
                class="absolute top-3 right-40 w-[280px] z-20"
            />
        </div>
        <div
            class="mx-auto flex items-start justify-start px-5 relative z-10 top-[60px] overflow-y-auto"
        >
            <div class="w-full max-w-7xl mx-auto px-10 py-12 rounded-3xl text-white">
                <div class="mb-10">
                    <h2 class="text-3xl font-semibold">Review Your Details</h2>
                    <p class="text-sm text-white/70 mt-2">
                        Check carefully before you send us all your information.
                    </p>
                </div>

                <div class="grid grid-cols-3 gap-10 text-base leading-relaxed overflow-y-auto">
                    <div class="space-y-3 overflow-y-auto">
                        <div class="flex items-center justify-start gap-3 mb-4">
                            <h3 class="text-xl font-semibold">Business Details</h3>
                            <button
                                class="inline-flex items-center gap-2 rounded-lg bg-white px-3 py-1.5 shadow-sm text-[#163F75] text-sm font-semibold hover:bg-white/90 transition"
                            >
                                <svg
                                    width="20"
                                    height="20"
                                    viewBox="0 0 20 20"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M11.4561 17.0365H17.4999"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                    <path
                                        fill-rule="evenodd"
                                        clip-rule="evenodd"
                                        d="M10.65 3.16233C11.2964 2.38982 12.4583 2.27655 13.2469 2.90978C13.2905 2.94413 14.6912 4.03232 14.6912 4.03232C15.5575 4.55599 15.8266 5.66925 15.2912 6.51882C15.2627 6.56432 7.34329 16.4704 7.34329 16.4704C7.07981 16.7991 6.67986 16.9931 6.25242 16.9978L3.21961 17.0358L2.53628 14.1436C2.44055 13.7369 2.53628 13.3098 2.79975 12.9811L10.65 3.16233Z"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                    <path
                                        d="M9.18408 5L13.7276 8.48927"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                </svg>
                                Edit
                            </button>
                        </div>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">
                                Commercial Name:
                            </span>
                            <span class="font-medium"><%= businessDetails.commercialName %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">
                                Business Landline:
                            </span>
                            <span class="font-medium">
                                <%= businessDetails.countryCode %> <%=
                                businessDetails.businessLandline %>
                            </span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">VAT Number:</span>
                            <span class="font-medium"><%= businessDetails.VATnumber %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">CR Number:</span>
                            <span class="font-medium"><%= businessDetails.CRnumber %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Business Email:</span>
                            <span class="font-medium"><%= businessDetails.businessEmail %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Working Time:</span>
                            <br />
                            <% businessDetails.workingTime.forEach(time => { %>
                            <span class="font-medium">
                                <%= moment(time.openTime).tz("Asia/Kolkata").format("hh:mm A") %> to
                                <%= moment(time.closeTime).tz("Asia/Kolkata").format("hh:mm A") %>
                            </span>
                            <br />
                            <% }) %>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Working Day:</span>
                            <span class="font-medium"><%= businessDetails.workingDays %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">City:</span>
                            <span class="font-medium"><%= businessDetails.city %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Country:</span>
                            <span class="font-medium"><%= businessDetails.country %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">
                                Business Address:
                            </span>
                            <span class="font-medium">Will SHow later after revrse GEO coding</span>
                        </p>
                    </div>
                    <div class="space-y-2 overflow-y-auto">
                        <div class="flex items-center justify-start gap-3 mb-4">
                            <h3 class="text-xl font-semibold">Residence Details</h3>
                            <div>
                                <button>
                                    <svg
                                        class="-scale-x-100"
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M12 21.25C17.108 21.25 21.25 17.109 21.25 12C21.25 6.892 17.108 2.75 12 2.75C6.892 2.75 2.75 6.892 2.75 12C2.75 17.109 6.892 21.25 12 21.25Z"
                                            fill="white"
                                            stroke="#163F75"
                                            stroke-width="1.5"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                        <path
                                            d="M10.5576 15.4707L14.0436 11.9997L10.5576 8.5287"
                                            stroke="#163F75"
                                            stroke-width="1.5"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                    </svg>
                                </button>
                                <button>
                                    <svg
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M12 21.25C17.108 21.25 21.25 17.109 21.25 12C21.25 6.892 17.108 2.75 12 2.75C6.892 2.75 2.75 6.892 2.75 12C2.75 17.109 6.892 21.25 12 21.25Z"
                                            fill="white"
                                            stroke="#163F75"
                                            stroke-width="1.5"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                        <path
                                            d="M10.5576 15.4707L14.0436 11.9997L10.5576 8.5287"
                                            stroke="#163F75"
                                            stroke-width="1.5"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                    </svg>
                                </button>
                            </div>
                            <button
                                class="inline-flex items-center gap-2 rounded-lg bg-white px-3 py-1.5 shadow-sm text-[#163F75] text-sm font-semibold hover:bg-white/90 transition"
                            >
                                <svg
                                    width="20"
                                    height="20"
                                    viewBox="0 0 20 20"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M11.4561 17.0365H17.4999"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                    <path
                                        fill-rule="evenodd"
                                        clip-rule="evenodd"
                                        d="M10.65 3.16233C11.2964 2.38982 12.4583 2.27655 13.2469 2.90978C13.2905 2.94413 14.6912 4.03232 14.6912 4.03232C15.5575 4.55599 15.8266 5.66925 15.2912 6.51882C15.2627 6.56432 7.34329 16.4704 7.34329 16.4704C7.07981 16.7991 6.67986 16.9931 6.25242 16.9978L3.21961 17.0358L2.53628 14.1436C2.44055 13.7369 2.53628 13.3098 2.79975 12.9811L10.65 3.16233Z"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                    <path
                                        d="M9.18408 5L13.7276 8.48927"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                </svg>
                                Edit
                            </button>
                        </div>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Residence Type:</span>
                            <span class="font-medium"><%= residenceDetails.residenceType %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Number of Flat:</span>
                            <span class="font-medium">
                                <%= residenceDetails.numberOfFlatOrVilla %>
                            </span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Building Name:</span>
                            <span class="font-medium">
                                <%= residenceDetails.buildingNameOrAreaName %>
                            </span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">
                                Residence Address:
                            </span>
                            <span class="font-medium">
                                <%= residenceDetails.residenceAddressOrRoadBlock %>
                            </span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Assign Manager:</span>
                            <span class="font-medium"><%= residenceDetails.managerName %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">
                                Select Permission:
                            </span>
                            <% residenceDetails.permissions.forEach(p => { %>
                            <span class="font-medium"><%= p %></span>
                            , <% }) %>
                        </p>

                        <hr class="my-6 border-white/30" />

                        <div class="flex items-center justify-start gap-3 mb-4">
                            <h3 class="text-xl font-semibold">Admin Profile</h3>
                            <div>
                                <button>
                                    <svg
                                        class="-scale-x-100"
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M12 21.25C17.108 21.25 21.25 17.109 21.25 12C21.25 6.892 17.108 2.75 12 2.75C6.892 2.75 2.75 6.892 2.75 12C2.75 17.109 6.892 21.25 12 21.25Z"
                                            fill="white"
                                            stroke="#163F75"
                                            stroke-width="1.5"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                        <path
                                            d="M10.5576 15.4707L14.0436 11.9997L10.5576 8.5287"
                                            stroke="#163F75"
                                            stroke-width="1.5"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                    </svg>
                                </button>
                                <button>
                                    <svg
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M12 21.25C17.108 21.25 21.25 17.109 21.25 12C21.25 6.892 17.108 2.75 12 2.75C6.892 2.75 2.75 6.892 2.75 12C2.75 17.109 6.892 21.25 12 21.25Z"
                                            fill="white"
                                            stroke="#163F75"
                                            stroke-width="1.5"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                        <path
                                            d="M10.5576 15.4707L14.0436 11.9997L10.5576 8.5287"
                                            stroke="#163F75"
                                            stroke-width="1.5"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                    </svg>
                                </button>
                            </div>
                            <button
                                class="inline-flex items-center gap-2 rounded-lg bg-white px-3 py-1.5 shadow-sm text-[#163F75] text-sm font-semibold hover:bg-white/90 transition"
                            >
                                <svg
                                    width="20"
                                    height="20"
                                    viewBox="0 0 20 20"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M11.4561 17.0365H17.4999"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                    <path
                                        fill-rule="evenodd"
                                        clip-rule="evenodd"
                                        d="M10.65 3.16233C11.2964 2.38982 12.4583 2.27655 13.2469 2.90978C13.2905 2.94413 14.6912 4.03232 14.6912 4.03232C15.5575 4.55599 15.8266 5.66925 15.2912 6.51882C15.2627 6.56432 7.34329 16.4704 7.34329 16.4704C7.07981 16.7991 6.67986 16.9931 6.25242 16.9978L3.21961 17.0358L2.53628 14.1436C2.44055 13.7369 2.53628 13.3098 2.79975 12.9811L10.65 3.16233Z"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                    <path
                                        d="M9.18408 5L13.7276 8.48927"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                </svg>
                                Edit
                            </button>
                        </div>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">First Name:</span>
                            <span class="font-medium"><%= adminProfile.firstName %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Middle Name:</span>
                            <span class="font-medium"><%= adminProfile.middleName %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Last Name:</span>
                            <span class="font-medium"><%= adminProfile.lastName %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Your Role:</span>
                            <span class="font-medium"><%= adminProfile.role %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Your Role:</span>
                            <span class="font-medium"><%= adminProfile.email %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Mobile No.:</span>
                            <span class="font-medium">
                                <%= adminProfile.countryCode %> <%= adminProfile.contactNumber %>
                            </span>
                        </p>
                    </div>
                    <div class="space-y-3 overflow-y-auto">
                        <div class="mb-4">
                            <h3 class="text-xl font-semibold">Selected Plan</h3>
                            <p class="mt-2">Premium</p>
                        </div>

                        <hr class="my-6 border-white/30" />

                        <div class="flex items-center justify-start gap-3 mb-4">
                            <h3 class="text-xl font-semibold">Bank Details</h3>
                            <button
                                class="inline-flex items-center gap-2 rounded-lg bg-white px-3 py-1.5 shadow-sm text-[#163F75] text-sm font-semibold hover:bg-white/90 transition"
                            >
                                <svg
                                    width="20"
                                    height="20"
                                    viewBox="0 0 20 20"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M11.4561 17.0365H17.4999"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                    <path
                                        fill-rule="evenodd"
                                        clip-rule="evenodd"
                                        d="M10.65 3.16233C11.2964 2.38982 12.4583 2.27655 13.2469 2.90978C13.2905 2.94413 14.6912 4.03232 14.6912 4.03232C15.5575 4.55599 15.8266 5.66925 15.2912 6.51882C15.2627 6.56432 7.34329 16.4704 7.34329 16.4704C7.07981 16.7991 6.67986 16.9931 6.25242 16.9978L3.21961 17.0358L2.53628 14.1436C2.44055 13.7369 2.53628 13.3098 2.79975 12.9811L10.65 3.16233Z"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                    <path
                                        d="M9.18408 5L13.7276 8.48927"
                                        stroke="#163F75"
                                        stroke-width="1.5"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                </svg>
                                Edit
                            </button>
                        </div>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Account Name:</span>
                            <span class="font-medium"><%= bankDetails.accountName %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Account Number:</span>
                            <span class="font-medium"><%= bankDetails.accountNumber %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">IBAN:</span>
                            <span class="font-medium"><%= bankDetails.IBAN %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">Bank Name:</span>
                            <span class="font-medium"><%= bankDetails.bankName %></span>
                        </p>
                        <p>
                            <span class="text-sm font-normal text-[white]/80">
                                Billing Address:
                            </span>
                            <span class="font-medium"><%= bankDetails.billingAddress %></span>
                        </p>
                    </div>
                </div>
                <div class="mt-3 flex items-start gap-3">
                    <input type="checkbox" class="mt-1 scale-110 accent-[#54B7C5]" />
                    <p class="text-sm text-white/80">
                        I have read and agree to the following
                        <a href="#" class="underline text-white font-medium">Terms & Conditions</a>
                        . In addition, I am the owner or am acting on behalf of the owner as the
                        authorised signatory of said entity.
                    </p>
                </div>
            </div>
        </div>
        <div>
            <img
                src="<%= process.env.APP_URL_ADMIN %>/Icons/images/BMAuthBottom.svg"
                alt="Bottom Left Decoration"
                class="absolute bottom-0 left-0 w-[1044px] pointer-events-none"
            />
            <div
                class="absolute bottom-8 left-0 w-full flex items-center justify-between px-[280px]"
            >
                <div class="">
                    <h2 class="text-4xl font-semibold text-gray-800">
                        Step 6
                        <span class="text-gray-500 font-normal">out of 6</span>
                    </h2>
                </div>
                <div class="flex items-center gap-6">
                    <button
                        onclick="window.location.href='<%= process.env.APP_ADMIN_URL %>/bmadmin/subscriptiondetails'"
                        class="text-base font-medium text-white hover:underline"
                    >
                        &lt; Back
                    </button>

                    <button
                        id="submitButton"
                        type="submit"
                        class="bg-[#54B7C5] hover:bg-[#54B7C5]/80 text-white text-lg font-medium rounded-xl px-[100px] py-3 transition"
                    >
                        Save & Continue
                    </button>
                </div>
            </div>
        </div>
    </body>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#submitButton").on("click", function (e) {
                $.ajax({
                    type: "POST",
                    url: "/bmadmin/reviewdetails",
                    success: function () {
                        console.log("Form submitted successfully");
                        Swal.fire({
                            icon: "success",
                            showConfirmButton: false,
                            timer: 1500,
                            toast: true,
                            position: "top-end",
                            title: "Submitted",
                            text: "Your details have been successfully submitted.",
                        }).then(() => {
                            window.location.href = "<%= process.env.APP_ADMIN_URL %>/bmadmin/login";
                        });
                    },
                    error: function (xhr, status, error) {
                        console.error("Error submitting form:", error);
                        Swal.fire({
                            icon: "error",
                            title: "Error",
                            text: "There was an error submitting your details. Please try again.",
                        });
                    },
                });
            });
        });
    </script>
</html>
