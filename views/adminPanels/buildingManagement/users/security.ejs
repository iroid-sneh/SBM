<div
    class="bg-white rounded-tl-[40px] rounded-br-[90px] p-6 shadow-md flex justify-between items-center"
>
    <h1 class="text-2xl font-medium text-gray-500">Users</h1>
    <div class="flex items-center gap-4">
        <!-- Tab Buttons -->
        <div class="bg-[#F3F2F1] rounded-lg flex items-center">
            <button
                onclick="window.location.href='<%= process.env.APP_URL_ADMIN %>/bmadmin/users/residentowner'"
                id="btn-resident"
                class="px-4 py-2 rounded-lg text-gray-600 hover:text-black transition-all"
            >
                Resident/Owner
            </button>
            <button
                onclick="window.location.href='<%= process.env.APP_URL_ADMIN %>/bmadmin/users/security'"
                id="btn-security"
                class="px-4 py-2 rounded-lg text-white bg-[#54B7C5] transition-all"
            >
                Security
            </button>
            <button
                onclick="window.location.href='<%= process.env.APP_URL_ADMIN %>/bmadmin/users/technician'"
                id="btn-technician"
                class="px-4 py-2 rounded-lg text-gray-600 hover:text-black transition-all"
            >
                Technician
            </button>
        </div>

        <!-- File icon at the start -->
        <button
            class="flex items-center m-2 mr-5"
            data-modal-target="reports-modal"
            data-modal-toggle="reports-modal"
        >
            <svg
                class="w-6 h-6 text-gray-800 transform scale-x-[-1]"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="none"
                viewBox="0 0 24 24"
            >
                <path
                    stroke="#163f75"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10 3v4a1 1 0 0 1-1 1H5m4 8h6m-6-4h6m4-8v16a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V7.914a1 1 0 0 1 .293-.707l3.914-3.914A1 1 0 0 1 9.914 3H18a1 1 0 0 1 1 1Z"
                />
            </svg>
        </button>
    </div>
</div>

<div class="p-7">
    <div class="gap-4 py-2 px-4 items-center mb-3">
        <!-- Request Type Buttons -->
        <div class="flex justify-end items-center space-x-3">
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg
                        class="h-5 w-5 text-gray-400"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                        />
                    </svg>
                </div>
                <input
                    type="text"
                    placeholder="Search"
                    class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-white shadow-sm focus:outline-none focus:ring-1 focus:ring-[#54B7C5] focus:border-[#54B7C5] sm:text-sm"
                />
            </div>
            <button
                class="bg-white text-sm font-semibold text-[#163F75] border border-[2px] border-gray-300 px-8 py-2.5 rounded-xl hover:bg-[#163F75]/10 transition"
                data-modal-target="add-security-modal"
                data-modal-toggle="add-security-modal"
            >
                + Add Security
            </button>
        </div>
    </div>
    <!-- DataTable Section -->
    <div class="overflow-x-auto">
        <table id="usersTable" class="min-w-full" datatables="true">
            <thead class="bg-[#eaeae9] rounded-t-[30px]">
                <tr>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider first:rounded-l-lg last:rounded-r-lg"
                    >
                        <input
                            id="checkbox-all"
                            aria-describedby="checkbox-1"
                            type="checkbox"
                            class="w-4 h-4 border-gray-300 rounded bg-gray-50"
                        />
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider first:rounded-l-lg last:rounded-r-lg"
                    >
                        Building/Complex Name
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider first:rounded-l-lg last:rounded-r-lg"
                    >
                        Security Name
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider"
                    >
                        Nationality
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider"
                    >
                        Contact No.
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider"
                    >
                        Email Address
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider last:rounded-r-lg"
                    >
                        Actions
                    </th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 bg-[#f6f6f6]">
                <!-- User 1 -->
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                        <input
                            id="checkbox-all"
                            aria-describedby="checkbox-1"
                            type="checkbox"
                            class="w-4 h-4 border-gray-300 rounded bg-gray-200 appearance-none checked:bg-[#54B7C5] focus:ring-[#54B7C5]"
                        />
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                        Marasai Residents
                    </td>
                    <td class="flex items-center p-4 mr-12 space-x-1 whitespace-nowrap">
                        <img
                            class="w-10 h-10 rounded-full"
                            src="https://flowbite-admin-dashboard.vercel.app/images/users/neil-sims.png"
                            alt="Neil Sims avatar"
                        />
                        <div class="text-base font-semibold text-gray-900">Neil Sims</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                        Cameroon
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">+773 39876543</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        jeanbabua@gmail.com
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        <button
                            type="button"
                            data-modal-target="delete-user-modal"
                            data-modal-toggle="delete-user-modal"
                            class="inline-flex items-center px-3 py-2"
                        >
                            <svg
                                class="w-6 h-6 text-gray-800 dark:text-white"
                                aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                fill="none"
                                viewBox="0 0 24 24"
                            >
                                <path
                                    stroke="#F26E6E"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"
                                />
                            </svg>
                        </button>
                        <button
                            type="button"
                            data-modal-target="edit-user-modal"
                            data-modal-toggle="edit-user-modal"
                            class="inline-flex items-center"
                        >
                            <svg
                                class="w-6 h-6 text-gray-800 dark:text-white"
                                aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                fill="none"
                                viewBox="0 0 24 24"
                            >
                                <path
                                    stroke="#54B7C5"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"
                                />
                            </svg>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

        <!-- Pagination Info -->
        <div class="mt-4 text-sm text-gray-600 px-6">Showing 1 of 28</div>
    </div>
</div>

<!-- Add Security Modal -->
<div
    id="add-security-modal"
    tabindex="-1"
    aria-hidden="true"
    class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto h-modal md:h-full"
>
    <!-- Modal Container -->
    <div class="bg-[#F7F6F5] rounded-2xl shadow-xl w-full max-w-md max-h-[90vh]">
        <!-- Modal Header -->
        <div class="flex justify-between items-center p-6 border-b border-gray-200">
            <h3 class="text-xl font-semibold text-gray-800">Add Security</h3>
            <button
                data-modal-hide="add-security-modal"
                class="text-red-500 hover:text-red-700 text-xl"
            >
                Close &times;
            </button>
        </div>

        <!-- Modal Content -->
        <div class="p-6 max-h-[calc(100vh-200px)] overflow-y-auto">
            <!-- Profile Photo -->
            <div class="flex justify-center mb-6">
                <div class="relative w-24 h-24">
                    <!-- Circular Background with Centered SVG -->
                    <div
                        id="profilePlaceholder"
                        class="w-[95px] h-[95px] rounded-full border-4 border-[#57C1D1] flex items-center justify-center bg-gray-100 overflow-hidden"
                    >
                        <!-- Your SVG Icon -->
                        <svg
                            class="w-10 h-10 text-gray-500"
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M7 17v1a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1a3 3 0 0 0-3-3h-4a3 3 0 0 0-3 3Zm8-9a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
                            />
                        </svg>
                    </div>

                    <!-- Hidden File Input -->
                    <input id="imageUpload" type="file" accept="image/*" class="hidden" />

                    <!-- Camera Icon Button -->
                    <label
                        for="imageUpload"
                        class="absolute bottom-0 right-0 bg-[#57C1D1] text-white p-2 rounded-full shadow-[0px_4px_10px_rgba(0,0,0,0.05)] cursor-pointer"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-4 w-4"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"
                            />
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"
                            />
                        </svg>
                    </label>
                </div>
            </div>

            <!-- Form Fields -->
            <div class="space-y-5">
                <div>
                    <input
                        placeholder="Full Name"
                        type="text"
                        class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                    />
                </div>

                <div>
                    <select
                        class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                    >
                        <option value="" disabled selected>Select Nationality</option>
                        <option value="">USA</option>
                        <option value="">Armenia</option>
                        <option value="">Camer</option>
                    </select>
                </div>

                <div>
                    <select
                        class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                    >
                        <option value="" disabled selected>Select Building/Complex</option>
                        <option value="">AlNaseem</option>
                        <option value="">Marasai Residence</option>
                        <option value="">Marasai Park</option>
                    </select>
                </div>

                <!-- Contact Number -->
                <div
                    class="flex items-center px-4 py-3 bg-white rounded-xl shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                >
                    <div class="relative flex items-center mr-3">
                        <select
                            id="contactSelect"
                            class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                        >
                            <option value="bh" selected>Bahrain</option>
                            <option value="sa">Saudi Arabia</option>
                            <option value="ae">UAE</option>
                            <option value="qa">Qatar</option>
                            <option value="kw">Kuwait</option>
                            <option value="om">Oman</option>
                        </select>

                        <img
                            id="contactSelectFlagIcon"
                            src="https://flagcdn.com/w40/bh.png"
                            class="w-6 h-4 object-cover border rounded-sm"
                            alt="Country flag"
                        />
                        <svg
                            class="w-2.5 h-2.5 text-gray-600 ml-1 pointer-events-none"
                            fill="none"
                            viewBox="0 0 10 6"
                        >
                            <path stroke="currentColor" stroke-width="2" d="M1 1l4 4 4-4" />
                        </svg>
                    </div>
                    <input
                        type="text"
                        placeholder="Contact Number"
                        class="w-full bg-transparent focus:outline-none text-sm placeholder-gray-400"
                    />
                </div>

                <div>
                    <input
                        placeholder="Email Address"
                        type="text"
                        class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                    />
                </div>
            </div>
            <div class="flex justify-center p-4 mt-2">
                <button
                    class="bg-[#57C1D1] hover:bg-[#4BB3C2] text-white py-3 px-9 rounded-lg font-medium text-base shadow-[0px_4px_10px_rgba(0,0,0,0.05)] transition"
                >
                    Save
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Reports Modal -->
<div
    id="reports-modal"
    tabindex="-1"
    class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto h-modal md:h-full"
    aria-hidden="true"
>
    <!-- Modal Container -->
    <div class="bg-[#F7F6F5] rounded-2xl shadow-xl w-full max-w-md">
        <!-- Modal Header -->
        <div class="flex justify-between items-center p-6 border-b border-gray-200">
            <h3 class="text-xl font-semibold text-gray-800">Reports</h3>
            <button
                data-modal-hide="reports-modal"
                class="text-red-400 hover:text-red-600 text-2xl"
            >
                Close &times;
            </button>
        </div>

        <!-- Modal Content -->
        <div class="p-6">
            <div class="flex flex-col space-y-3">
                <div class="relative">
                    <label class="block text-sm font-medium text-gray-700 mb-1">From</label>
                    <div class="relative">
                        <div
                            class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"
                        >
                            <svg
                                class="w-4 h-4 text-gray-500"
                                aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"
                                />
                            </svg>
                        </div>
                        <input
                            datepicker
                            datepicker-orientation="bottom"
                            datepicker-format="dd-mm-yyyy"
                            type="text"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5"
                            placeholder="Select date"
                        />
                    </div>
                </div>

                <div class="relative">
                    <label class="block text-sm font-medium text-gray-700 mb-1">To</label>
                    <div class="relative">
                        <div
                            class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"
                        >
                            <svg
                                class="w-4 h-4 text-gray-500"
                                aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"
                                />
                            </svg>
                        </div>
                        <input
                            datepicker
                            datepicker-orientation="bottom"
                            datepicker-format="dd-mm-yyyy"
                            type="text"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5"
                            placeholder="Select date"
                        />
                    </div>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="flex justify-center p-6 gap-2 border-gray-200">
                <button
                    class="bg-[#57C1D1] hover:bg-[#4BB3C2] text-white py-3 px-16 rounded-lg font-medium text-base shadow-[0px_4px_10px_rgba(0,0,0,0.05)] transition"
                >
                    View
                </button>
                <button
                    class="bg-[#163F75] hover:bg-[#163F75]/90 text-white py-3 px-16 rounded-lg font-medium text-base shadow-[0px_4px_10px_rgba(0,0,0,0.05)] transition"
                >
                    Extract
                </button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
<script>
    const flagMap = {
        bh: "https://flagcdn.com/w40/bh.png",
        sa: "https://flagcdn.com/w40/sa.png",
        ae: "https://flagcdn.com/w40/ae.png",
        qa: "https://flagcdn.com/w40/qa.png",
        kw: "https://flagcdn.com/w40/kw.png",
        om: "https://flagcdn.com/w40/om.png",
    };
    // For login form
    document.getElementById("contactSelect").addEventListener("change", function () {
        document.getElementById("contactSelectFlagIcon").src = flagMap[this.value];
    });

    const buttons = document.querySelectorAll(".inactive-tab, .active-tab");

    buttons.forEach((btn) => {
        btn.addEventListener("click", () => {
            buttons.forEach((b) => b.classList.remove("bg-[#54B7C5]", "text-white", "active-tab"));
            btn.classList.add("bg-[#54B7C5]", "text-white", "active-tab");
        });
    });

    const imageUpload = document.getElementById("imageUpload");
    const profilePlaceholder = document.getElementById("profilePlaceholder");

    imageUpload.addEventListener("change", function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                profilePlaceholder.innerHTML = `
          <img src="${e.target.result}" alt="Profile" class="w-full h-full object-cover rounded-full" />
        `;
            };
            reader.readAsDataURL(file);
        }
    });
    // For Edit Modal
    const imageUploadEdit = document.getElementById("imageUpload-edit");
    const profilePlaceholderEdit = document.getElementById("profilePlaceholder-edit");

    imageUploadEdit.addEventListener("change", function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                profilePlaceholderEdit.innerHTML = `
          <img src="${e.target.result}" alt="Profile" class="w-full h-full object-cover rounded-full" />
        `;
            };
            reader.readAsDataURL(file);
        }
    });
</script>
