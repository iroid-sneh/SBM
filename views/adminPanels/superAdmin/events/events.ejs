<%- include('../../../layouts/header.ejs', {currentPage: 'events'}) %>

<body class="flex">
    <main class="ml-64">
        <div class="bg-[#f6f6f6] rounded-l-[50px] p-8 shadow-md">
            <div class="bg-[#eaeae9] rounded-l-[25px] rounded-r-[25px] shadow-md border-[2px]">
                <div class="bg-white rounded-l-[25px] rounded-r-[25px] p-6 shadow-md border-[2px]">
                    <div class="flex justify-between items-center">
                        <!-- Left side - title -->
                        <div class="flex items-center space-x-2">
                            <h1 class="text-3xl font-bold text-gray-800">Events</h1>
                        </div>

                        <!-- Right side - Profile info -->
                        <div class="flex items-center space-x-3">
                            <img
                                src="https://i.pravatar.cc/40?img=11"
                                alt="Profile"
                                class="w-10 h-10 rounded-full shadow-md"
                            />
                            <div class="text-right">
                                <div class="text-base font-semibold text-gray-800">
                                    Thomas Lewis
                                </div>
                                <div class="text-sm text-gray-500">Super Admin</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="p-2 flex items-end justify-between">
                    <div class="flex items-end">
                        <!-- File icon at the start -->
                        <button class="flex items-center m-2">
                            <svg
                                class="w-6 h-6 text-gray-800 transform scale-x-[-1]"
                                aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                fill="none"
                                viewBox="0 0 24 24"
                            >
                                <path
                                    stroke="#163f75"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M10 3v4a1 1 0 0 1-1 1H5m4 8h6m-6-4h6m4-8v16a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V7.914a1 1 0 0 1 .293-.707l3.914-3.914A1 1 0 0 1 9.914 3H18a1 1 0 0 1 1 1Z"
                                />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            <div class="w-full h-[1px] my-4"></div>

            <div class="bg-[#f6f6f6] rounded-l-[50px] rounded-r-[50px] p-8 shadow-md">
                <!-- Filter Section -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 py-2 px-4 items-end">
                    <!-- Category Slide Switcher - takes first column -->
                    <div class="flex space-x-6 pb-1 border-b border-gray-200"></div>

                    <!-- Empty middle column for spacing -->
                    <div class="hidden md:block"></div>

                    <!-- Search Button - takes third column and aligned to end -->
                    <div class="flex justify-end items-center space-x-1 mb-1">
                        <div class="relative">
                            <div
                                class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                            >
                                <svg
                                    class="h-5 w-5 text-gray-400"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke="currentColor"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                                    />
                                </svg>
                            </div>
                            <input
                                type="text"
                                placeholder="Search"
                                class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-full bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-[#163f75] focus:border-[#163f75] sm:text-sm"
                            />
                        </div>
                        <div class="flex space-x-2">
                            <button
                                type="button"
                                data-modal-target="create-event-modal"
                                data-modal-toggle="create-event-modal"
                                class="w-[190px] h-[38px] px-3 text-m font-semibold rounded-full flex items-center justify-center bg-white text-[#163f75] hover:bg-gray-400 transition-colors border-[1px] border-[#163f75] shadow-sm hover:shadow-md"
                            >
                                + Create Event
                            </button>
                        </div>
                    </div>
                </div>

                <!-- DataTable Section -->
                <div class="overflow-x-auto">
                    <table id="usersTable" class="min-w-full" datatables="true">
                        <thead class="bg-[#eaeae9] rounded-t-[30px]">
                            <tr>
                                <th
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider first:rounded-l-lg last:rounded-r-lg"
                                >
                                    <input
                                        id="checkbox-all"
                                        aria-describedby="checkbox-1"
                                        type="checkbox"
                                        class="w-4 h-4 border-gray-300 rounded bg-gray-50"
                                    />
                                </th>
                                <th
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider first:rounded-l-lg last:rounded-r-lg"
                                >
                                    Sr No.
                                </th>
                                <th
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider first:rounded-l-lg last:rounded-r-lg"
                                >
                                    Event Name
                                </th>
                                <th
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                                >
                                    Date
                                </th>
                                <th
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                                >
                                    Time
                                </th>
                                <th
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                                >
                                    Location
                                </th>
                                <th
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                                >
                                    Event For
                                </th>
                                <th
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                                >
                                    Capacity/Booked
                                </th>
                                <th
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                                >
                                    Ticket Price
                                </th>
                                <th
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider last:rounded-r-lg"
                                >
                                    Actions
                                </th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200 bg-[#f6f6f6]">
                            <!-- 1 -->
                            <tr>
                                <td
                                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                                >
                                    <input
                                        id="checkbox-all"
                                        aria-describedby="checkbox-1"
                                        type="checkbox"
                                        class="w-4 h-4 border-gray-300 rounded bg-gray-200 appearance-none checked:bg-[#54B7C5] focus:ring-[#54B7C5]"
                                    />
                                </td>
                                <td
                                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                                >
                                    01
                                </td>
                                <td class="flex items-center p-4 mr-12 space-x-1 whitespace-nowrap">
                                    <img
                                        class="w-10 h-10 rounded-full"
                                        src="https://flowbite-admin-dashboard.vercel.app/images/users/neil-sims.png"
                                        alt="Neil Sims avatar"
                                    />
                                    <button
                                        data-modal-toggle="event-details-modal"
                                        data-modal-target="event-details-modal"
                                        class="text-base font-semibold text-[#163f75] hover:underline"
                                    >
                                        Cook-Out
                                    </button>
                                </td>
                                <td
                                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                                >
                                    23-08-2025
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                    10.00 AM
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                    Links Restaurant
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                    For All
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                    100/50
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                    15.000
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                    <button
                                        type="button"
                                        data-modal-target=""
                                        data-modal-toggle=""
                                        class="inline-flex items-center px-3 py-2"
                                    >
                                        <svg
                                            class="w-6 h-6 text-gray-800 dark:text-white"
                                            aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg"
                                            width="24"
                                            height="24"
                                            fill="none"
                                            viewBox="0 0 24 24"
                                        >
                                            <path
                                                stroke="#F26E6E"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"
                                            />
                                        </svg>
                                    </button>
                                    <button
                                        type="button"
                                        data-modal-target="edit-event-modal"
                                        data-modal-toggle="edit-event-modal"
                                        class="inline-flex items-center"
                                    >
                                        <svg
                                            class="w-6 h-6 text-gray-800 dark:text-white"
                                            aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg"
                                            width="24"
                                            height="24"
                                            fill="none"
                                            viewBox="0 0 24 24"
                                        >
                                            <path
                                                stroke="#54B7C5"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"
                                            />
                                        </svg>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- Pagination Info -->
                    <div class="mt-4 text-sm text-gray-600 px-6">Showing 1 of 28</div>
                </div>
            </div>
        </div>
    </main>

    <!-- Create Event Modal -->
    <div
        id="create-event-modal"
        tabindex="-1"
        class="fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-modal md:h-full hidden"
        aria-hidden="true"
    >
        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-[#F7F6F5] rounded-2xl shadow-xl w-full max-w-md overflow-hidden">
                <!-- Modal Header -->
                <div class="flex justify-between items-center p-6 border-b border-gray-200">
                    <h3 class="text-xl font-semibold text-gray-800">Create Event</h3>
                    <button
                        class="text-red-500 hover:text-red-700 text-xl"
                        data-modal-hide="create-event-modal"
                    >
                        Close &times;
                    </button>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <div class="space-y-5">
                        <!-- Upload Event Image -->
                        <div class="flex items-center justify-center mb-0">
                            <label
                                class="flex items-center justify-center w-full h-16 bg-white border border-dashed border-gray-300 rounded-xl cursor-pointer shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                            >
                                <div class="flex items-center gap-2 text-sm text-gray-500">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="w-5 h-5 text-gray-500"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                        stroke="currentColor"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4-4m0 0l-4 4m4-4v12"
                                        />
                                    </svg>
                                    <span>Upload Event Image</span>
                                </div>
                                <input type="file" class="hidden" />
                            </label>
                        </div>

                        <!-- Event Name -->
                        <input
                            type="text"
                            placeholder="Event Name"
                            class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                        />

                        <!-- Event Date -->
                        <div class="flex gap-4">
                            <!-- Date Picker -->
                            <div class="flex-1 relative">
                                <div
                                    class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
                                >
                                    <svg
                                        class="w-4 h-4 text-gray-500"
                                        aria-hidden="true"
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="currentColor"
                                        viewBox="0 0 20 20"
                                    >
                                        <path
                                            d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"
                                        />
                                    </svg>
                                </div>
                                <input
                                    datepicker
                                    datepicker-autohide
                                    type="text"
                                    placeholder="Event Date"
                                    class="w-full pl-10 px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                                />
                            </div>

                            <!-- Time Picker -->
                            <div class="flex-1">
                                <div class="flex">
                                    <input
                                        type="time"
                                        placeholder="Event Time"
                                        class="w-full px-4 py-3 bg-white rounded-l-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                                        min="09:00"
                                        max="18:00"
                                        value="00:00"
                                    />
                                    <span
                                        class="inline-flex items-center px-3 bg-white rounded-r-xl text-gray-700 shadow-[0px_4px_10px_rgba(0,0,0,0.05)] border-l-0"
                                    >
                                        <svg
                                            class="w-4 h-4 text-gray-500"
                                            aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg"
                                            fill="currentColor"
                                            viewBox="0 0 24 24"
                                        >
                                            <path
                                                fill-rule="evenodd"
                                                d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4a1 1 0 1 0-2 0v4a1 1 0 0 0 .293.707l3 3a1 1 0 0 0 1.414-1.414L13 11.586V8Z"
                                                clip-rule="evenodd"
                                            />
                                        </svg>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Audience Selection -->
                        <div class="flex items-center space-x-4">
                            <label class="inline-flex items-center">
                                <input
                                    type="radio"
                                    name="audience-create"
                                    class="form-radio text-[#57C1D1]"
                                    checked
                                    onclick="toggleBuildingSelect(false, this)"
                                />
                                <span class="ml-2 text-gray-700">For All</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input
                                    type="radio"
                                    name="audience-create"
                                    class="form-radio text-[#57C1D1]"
                                    onclick="toggleBuildingSelect(true, this)"
                                />
                                <span class="ml-2 text-gray-700">Specific Building/Complex</span>
                            </label>
                        </div>

                        <!-- Building/Complex Select (hidden by default) -->
                        <div id="" class="buildingSelectContainer hidden">
                            <select
                                id=""
                                onchange="addSelectedBuilding(this)"
                                class="building-select w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)] mt-3"
                            >
                                <option value="" disabled selected>Select Building/Complex</option>
                            </select>
                        </div>

                        <!-- Selected Tags -->
                        <div id="" class="selected-buildings flex flex-wrap gap-2"></div>

                        <!-- Event Location -->
                        <input
                            type="text"
                            placeholder="Event Location"
                            class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                        />

                        <!-- Number of Tickets -->
                        <input
                            type="number"
                            placeholder="Number of Tickets"
                            class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                        />

                        <!-- Ticket Fee -->
                        <input
                            type="text"
                            placeholder="Ticket Fee (Ex - 10.00)"
                            class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                        />

                        <!-- Event Details -->
                        <textarea
                            placeholder="Event Details"
                            class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)] min-h-[100px]"
                        ></textarea>
                    </div>
                </div>

                <!-- Modal Footer -->
                <div class="flex justify-center p-6 border-t border-gray-200">
                    <button
                        class="bg-[#57C1D1] hover:bg-[#4BB3C2] text-white py-3 px-9 rounded-lg font-medium text-base shadow-[0px_4px_10px_rgba(0,0,0,0.05)] transition"
                    >
                        Save
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Event Modal -->
    <div
        id="edit-event-modal"
        tabindex="-1"
        class="fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-modal md:h-full hidden"
        aria-hidden="true"
    >
        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-[#F7F6F5] rounded-2xl shadow-xl w-full max-w-md overflow-hidden">
                <!-- Modal Header -->
                <div class="flex justify-between items-center p-6 border-b border-gray-200">
                    <h3 class="text-xl font-semibold text-gray-800">Edit Event</h3>
                    <button
                        class="text-red-500 hover:text-red-700 text-xl"
                        data-modal-hide="edit-event-modal"
                    >
                        Close &times;
                    </button>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <div class="space-y-5">
                        <!-- Upload Event Image -->
                        <div class="flex items-center justify-center mb-0">
                            <label
                                class="flex items-center justify-center w-full h-16 bg-white border border-dashed border-gray-300 rounded-xl cursor-pointer shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                            >
                                <div class="flex items-center gap-2 text-sm text-gray-500">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="w-5 h-5 text-gray-500"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                        stroke="currentColor"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4-4m0 0l-4 4m4-4v12"
                                        />
                                    </svg>
                                    <span>Upload Event Image</span>
                                </div>
                                <input type="file" class="hidden" />
                            </label>
                        </div>

                        <!-- Event Name -->
                        <input
                            type="text"
                            value="Cook-out"
                            placeholder="Event Name"
                            class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                        />

                        <!-- Event Date -->
                        <div class="flex gap-4">
                            <!-- Date Picker -->
                            <div class="flex-1 relative">
                                <div
                                    class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
                                >
                                    <svg
                                        class="w-4 h-4 text-gray-500"
                                        aria-hidden="true"
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="currentColor"
                                        viewBox="0 0 20 20"
                                    >
                                        <path
                                            d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"
                                        />
                                    </svg>
                                </div>
                                <input
                                    datepicker
                                    datepicker-autohide
                                    data-date="05/25/2025"
                                    type="text"
                                    placeholder="Event Date"
                                    class="w-full pl-10 px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                                />
                            </div>

                            <!-- Time Picker -->
                            <div class="flex-1">
                                <div class="flex">
                                    <input
                                        type="time"
                                        placeholder="Event Time"
                                        data-time="10:00"
                                        class="w-full px-4 py-3 bg-white rounded-l-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                                        min="09:00"
                                        max="18:00"
                                        value="00:00"
                                    />
                                    <span
                                        class="inline-flex items-center px-3 bg-white rounded-r-xl text-gray-700 shadow-[0px_4px_10px_rgba(0,0,0,0.05)] border-l-0"
                                    >
                                        <svg
                                            class="w-4 h-4 text-gray-500"
                                            aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg"
                                            fill="currentColor"
                                            viewBox="0 0 24 24"
                                        >
                                            <path
                                                fill-rule="evenodd"
                                                d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4a1 1 0 1 0-2 0v4a1 1 0 0 0 .293.707l3 3a1 1 0 0 0 1.414-1.414L13 11.586V8Z"
                                                clip-rule="evenodd"
                                            />
                                        </svg>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Audience Selection -->
                        <div class="flex items-center space-x-4">
                            <label class="inline-flex items-center">
                                <input
                                    type="radio"
                                    name="audience-edit"
                                    class="form-radio text-[#57C1D1]"
                                    checked
                                    onclick="toggleBuildingSelect(false, this)"
                                />
                                <span class="ml-2 text-gray-700">For All</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input
                                    type="radio"
                                    name="audience-edit"
                                    class="form-radio text-[#57C1D1]"
                                    onclick="toggleBuildingSelect(true, this)"
                                />
                                <span class="ml-2 text-gray-700">Specific Building/Complex</span>
                            </label>
                        </div>

                        <!-- Building/Complex Select (hidden by default) -->
                        <div id="" class="buildingSelectContainer hidden">
                            <select
                                id=""
                                onchange="addSelectedBuilding(this)"
                                class="building-select w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)] mt-3"
                            >
                                <option value="" disabled selected>Select Building/Complex</option>
                            </select>
                        </div>

                        <!-- Selected Tags -->
                        <div id="" class="selected-buildings flex flex-wrap gap-2"></div>

                        <!-- Event Location -->
                        <input
                            value="Links Restaurant"
                            type="text"
                            placeholder="Event Location"
                            class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                        />

                        <!-- Number of Tickets -->
                        <input
                            value="200"
                            type="number"
                            placeholder="Number of Tickets"
                            class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                        />

                        <!-- Ticket Fee -->
                        <input
                            value="15.000"
                            type="text"
                            placeholder="Ticket Fee (Ex - 10.00)"
                            class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)]"
                        />

                        <!-- Event Details -->
                        <textarea
                            placeholder="Event Details"
                            class="w-full px-4 py-3 bg-white rounded-xl text-gray-700 text-sm focus:outline-none placeholder-gray-500 shadow-[0px_4px_10px_rgba(0,0,0,0.05)] min-h-[100px]"
                        ></textarea>
                    </div>
                </div>

                <!-- Modal Footer -->
                <div class="flex justify-center p-6 border-t border-gray-200">
                    <button
                        class="bg-[#57C1D1] hover:bg-[#4BB3C2] text-white py-3 px-9 rounded-lg font-medium text-base shadow-[0px_4px_10px_rgba(0,0,0,0.05)] transition"
                    >
                        Save
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Event Details Modal -->
    <div
        id="event-details-modal"
        tabindex="-1"
        class="fixed inset-0 z-50 hidden overflow-y-auto overflow-x-hidden bg-black bg-opacity-20 backdrop-blur-sm flex items-center justify-center w-full h-full"
    >
        <div class="relative p-4 w-full max-w-3xl max-h-full">
            <!-- Modal content -->
            <div class="relative bg-white rounded-3xl shadow-lg">
                <!-- Modal header -->
                <div class="flex items-center justify-between px-6 py-4 border-b rounded-t">
                    <h3 class="text-xl font-semibold text-gray-900 w-full text-center">
                        Event Details
                    </h3>
                    <button
                        data-modal-hide="event-details-modal"
                        class="text-red-500 hover:text-red-700 text-2xl"
                    >
                        &times;
                    </button>
                </div>

                <!-- Modal body -->
                <div class="px-6 py-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
                        <!-- Image and Basic Info -->
                        <div class="space-y-4">
                            <div class="relative">
                                <img
                                    src="https://flowbite-admin-dashboard.vercel.app/images/users/neil-sims.png"
                                    alt="Event Image"
                                    class="w-48 h-48 object-cover rounded-md cursor-pointer"
                                    onclick="document.getElementById('image-modal').classList.remove('hidden')"
                                />
                                <!-- Event Title and Location -->
                                <div class="pt-4">
                                    <h4 class="text-lg font-semibold text-gray-800">Cook-Out</h4>
                                    <p class="text-gray-600 text-sm">Links Restaurant</p>
                                </div>
                            </div>
                        </div>

                        <!-- Event Metadata -->
                        <div class="space-y-2 text-sm text-gray-800">
                            <div>
                                <span class="font-medium">Date:</span>
                                23-08-2024
                            </div>
                            <div>
                                <span class="font-medium">Time:</span>
                                10:00 AM
                            </div>
                            <div>
                                <span class="font-medium">Capacity:</span>
                                100
                            </div>
                            <div>
                                <span class="font-medium">Booked:</span>
                                60
                            </div>
                            <div>
                                <span class="font-medium">Cost:</span>
                                BHD15.000
                            </div>
                        </div>
                    </div>

                    <!-- Event Description -->
                    <div class="pt-6 text-sm text-gray-700">
                        <h5 class="font-semibold text-gray-900 mb-2">Event Details:</h5>
                        <p>
                            Suitable for groups of 20 to 40 adults, a cook out normally involves
                            splitting guests into teams and giving them a set period of time to
                            produce a starter, main course and dessert under the guidance of the
                            fantastic Royal Golf Club chefs, using only the set of ingredients
                            provided. Points are awarded by our Head Chef for team work, creativity,
                            use of all ingredients, tidiness, presentation and taste. Guests then
                            sit down to enjoy the meal they have created and prizes are awarded to
                            the winning team.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Lightbox Modal -->
    <div
        id="image-modal"
        class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 hidden"
        onclick="this.classList.add('hidden')"
    >
        <img
            src="https://flowbite-admin-dashboard.vercel.app/images/users/neil-sims.png"
            class="max-w-full max-h-full rounded-lg shadow-lg"
            alt="Expanded Image"
        />
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/datepicker.min.js"></script>
    <script>
        // Function to toggle building select visibility
        function toggleBuildingSelect(show, element) {
            // Traverse DOM to find the correct buildingSelectContainer within the same modal
            const modal = element.closest('[id$="-event-modal"]'); // matches both "edit-event-modal", etc.
            const container = modal?.querySelector(".buildingSelectContainer");

            if (!container) {
                console.error("Building select container not found");
                return;
            }

            if (show) {
                container.classList.remove("hidden");
            } else {
                container.classList.add("hidden");
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            const allBuildings = [
                "Building 1",
                "Building 2",
                "Building 3",
                "Building 4",
                "Building 5",
                "Building 6",
                "Building 7",
                "Building 8",
                "Building 9",
                "Building 10",
            ];

            // Stores selected buildings per modal (DOM element as key)
            const modalSelections = new WeakMap();

            function populateDropdown(selectElement) {
                if (!selectElement) return;

                // Clear old options
                selectElement.innerHTML = "";

                const defaultOption = document.createElement("option");
                defaultOption.value = "";
                defaultOption.textContent = "Select Building/Complex";
                defaultOption.disabled = true;
                defaultOption.selected = true;
                selectElement.appendChild(defaultOption);

                allBuildings.forEach((building) => {
                    const option = document.createElement("option");
                    option.value = building;
                    option.textContent = building;
                    selectElement.appendChild(option);
                });
            }

            // Attach dropdown logic to all select elements
            document.querySelectorAll(".building-select").forEach((selectElement) => {
                populateDropdown(selectElement);

                // Get the closest container (modal or section)
                const container = selectElement.closest(".buildingSelectContainer").parentElement;
                const selectedContainer = container.querySelector(".selected-buildings");

                // Initialize Set for this modal
                modalSelections.set(container, new Set());

                selectElement.addEventListener("change", () => {
                    const selected = selectElement.value;
                    const selectedSet = modalSelections.get(container);

                    if (selected && !selectedSet.has(selected)) {
                        selectedSet.add(selected);
                        updateSelectedUI(selectedSet, selectedContainer, container);
                    }

                    selectElement.value = "";
                });
            });

            window.removeBuilding = function (building, containerRef) {
                const selectedSet = modalSelections.get(containerRef);
                if (selectedSet) {
                    selectedSet.delete(building);
                    const selectedContainer = containerRef.querySelector(".selected-buildings");
                    updateSelectedUI(selectedSet, selectedContainer, containerRef);
                }
            };

            function updateSelectedUI(selectedSet, selectedContainer, containerRef) {
                selectedContainer.innerHTML = "";
                selectedSet.forEach((building) => {
                    const tag = document.createElement("span");
                    tag.className =
                        "bg-[#54B7C5] text-white px-3 py-1 rounded-full flex items-center";

                    // Use data attribute to store the building and modal reference
                    const button = document.createElement("button");
                    button.className = "ml-2 text-white hover:text-gray-200";
                    button.innerHTML = "&times;";
                    button.onclick = () => removeBuilding(building, containerRef);

                    tag.textContent = building;
                    tag.appendChild(button);

                    selectedContainer.appendChild(tag);
                });
            }
        });
    </script>
</body>

<%- include('../../../layouts/footer.ejs') %>
